<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wahr oder Klar? â€“ Die Spielewebseite fÃ¼r Freunde und SpaÃŸ</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="bilder/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="bilder/favicon.svg" />
  <link rel="shortcut icon" href="bilder/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="bilder/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Friendzone Fun" />
  <link rel="manifest" href="bilder/site.webmanifest" />
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo">ğŸ²</div>
    <div class="title-group">
      <h1>Wahr oder Klar? â€“ Die Spielewebseite fÃ¼r Freunde & SpaÃŸ</h1>
      <p class="subtitle">WÃ¤hlt einen Spielmodus und habt SpaÃŸ!</p>
    </div>
    <div class="icon-right">ğŸ‰</div>
  </div>
</header>

<main>
  <section class="intro">
    <h2>Hey! SchÃ¶n, dass du da bist ğŸ‘‹</h2>
    <p>Hier kannst du mit deinen Freunden richtig coole Spiele spielen. <br> Egal ob Klassenfahrt, Geburtstag oder einfach so â€“ such dir einen Spielmodus aus und los gehtâ€™s!</p>
  </section>

  <section class="grid">
    <a class="card" href="#" id="wopCard">
      <div class="emoji">ğŸ­</div>
      <h3>Wahrheit oder Pflicht</h3>
      <p>Harmlos oder mutig â€“ du entscheidest!</p>
    </a>
    <a class="card" href="#" id="wdeCard">
      <div class="emoji">ğŸ¤”</div>
      <h3>Wer wÃ¼rde eher...?</h3>
      <p>Lustige EinschÃ¤tzungen unter Freunden.</p>
    </a>
    <a class="card" href="#" id="ihnnCard">
      <div class="emoji">ğŸ»</div>
      <h3>Ich hab noch nie...</h3>
      <p>GestÃ¤ndnisse und SpaÃŸ garantiert.</p>
    </a>
    <a class="card" href="#" id="ewodCard">
      <div class="emoji">âš–ï¸</div>
      <h3>Entweder/Oder</h3>
      <p>Pizza oder Pommes? Entscheide dich!</p>
    </a>
    <a class="card" href="#" id="ldtCard">
      <div class="emoji">ğŸ“Š</div>
      <h3>Voting</h3>
      <p>Wie denkt die Runde wirklich?</p>
    </a>
  </section>
</main>

<footer>
  Â© 2025 â€“ Julian Kaiser <br>
  Made with ğŸ’™ â€“ SpaÃŸ garantiert ğŸ˜„
</footer>

<!-- ========== Modale (alle Spielmodi) ========== -->
<!-- Wahrheit oder Pflicht Modal -->
<div class="modal-overlay hidden" id="wopModal" role="dialog" aria-modal="true" aria-labelledby="wopModalTitle" tabindex="-1">
  <div class="modal">
    <button class="close-modal" id="closeWopModal" aria-label="SchlieÃŸen">âŒ</button>
    <h2 id="wopModalTitle">Wahrheit oder Pflicht â€“ Kategorien</h2>

    <div class="gender-select">
      <p>FÃ¼r wen sollen die Aufgaben sein?</p>
      <div class="gender-buttons">
        <button class="gender-btn active" data-value="mixed" type="button">âš§ Gemischt</button>
        <button class="gender-btn" data-value="male" type="button">ğŸ‘¦ Nur Jungs</button>
        <button class="gender-btn" data-value="female" type="button">ğŸ‘§ Nur MÃ¤dchen</button>
      </div>
    </div>

    <div class="mode-select" role="group" aria-label="Modus auswÃ¤hlen">
      <button id="wopBtnMixed" class="mode-btn active" type="button">ğŸ¨ Gemischt</button>
      <button id="wopBtnCustom" class="mode-btn" type="button">ğŸ›ï¸ Kategorien wÃ¤hlen</button>
    </div>

    
    <div class="category-select hidden" id="wopCategoryOptions">
      <label class="category-item" data-tooltip="FÃ¼r lockeren Einstieg, witzige Fragen, seichtes Niveau.">
        <input type="checkbox" value="funny" />
        ğŸ§ƒ Locker & Lustig
      </label>
      
      <label class="category-item" data-tooltip="Zum Aufbauen von Vertrauen, Offenheit und Gruppendynamik.">
        <input type="checkbox" value="daring" />
        ğŸ«± Vertrauensbasis
      </label>
      
      <label class="category-item" data-tooltip="Direkt, persÃ¶nlich, ehrlich. Keine Floskeln â€“ nur echte Antworten.">
        <input type="checkbox" value="real" />
        ğŸª Ehrlich jetzt?
      </label>
      
      <label class="category-item" data-tooltip="Psychologisch, fantasievoll, mit Gedankenexperimenten.">
        <input type="checkbox" value="mind" />
        ğŸ§  Kopfsache
      </label>
      
      <label class="category-item" data-tooltip="TiefgrÃ¼ndig, gefÃ¼hlvoll, persÃ¶nlich. FÃ¼r echte GesprÃ¤che.">
        <input type="checkbox" value="deep" />
        ğŸ’Œ Deep Talk
      </label>
      
      <label class="category-item" data-tooltip="Mutige Fragen oder Aufgaben mit Nervenkitzel.">
        <input type="checkbox" value="bold" />
        ğŸ«£ Mut & Grenzen
      </label>
      
      <label class="category-item" data-tooltip="Abgefahren, schrÃ¤g, unangenehm. FÃ¼r Mutige mit Humor.">
        <input type="checkbox" value="wtf" />
        ğŸŒ€ WTF?!
      </label>

      <label class="category-item" data-tooltip="KÃ¶rperlich, intim, aber noch spielbar fÃ¼r alle.">
        <input type="checkbox" value="taboo-light" />
        ğŸ”¸ Tabuzone light
      </label>
      
      <label class="category-item" data-tooltip="Intim, direkt, provokant. Nur fÃ¼r Vertrauensgruppen.">
        <input type="checkbox" value="taboo" />
        ğŸš« Tabuzone
      </label>

      <label class="category-item" data-tooltip="Nichts fÃ¼r schwache Nerven. Extrem kÃ¶rperlich, direkt, zweideutig. Nur bei extremem Vertrauen!">
        <input type="checkbox" value="Ã¼18" />
        ğŸ” Dirty Mode (Ãœ18)
      </label>
      
    </div>

    <button class="start-btn" id="wopStartBtn" type="button">Weiter</button>
  </div>
</div>

<!-- Wer wÃ¼rde eher... Modal -->
<div class="modal-overlay hidden" id="wdeModal" role="dialog" aria-modal="true" aria-labelledby="wdeModalTitle" tabindex="-1">
  <div class="modal">
    <button class="close-modal" id="closeWdeModal" aria-label="SchlieÃŸen">âŒ</button>
    <h2 id="wdeModalTitle">Wer wÃ¼rde eher...? â€“ Kategorien</h2>

    <div class="mode-select" role="group" aria-label="Modus auswÃ¤hlen">
      <button id="wdeBtnMixed" class="mode-btn active" type="button">ğŸ¨ Gemischt</button>
      <button id="wdeBtnCustom" class="mode-btn" type="button">ğŸ›ï¸ Kategorien wÃ¤hlen</button>
    </div>

    <div class="category-select hidden" id="wdeCategoryOptions">
      <label class="category-item" data-tooltip="Lustige, lockere Aussagen â€“ einfach zum Lachen.">
        <input type="checkbox" value="funny" />
        ğŸ˜‚ Locker und Lustig
      </label>
      <label class="category-item" data-tooltip="Wer kennt wen wirklich? Vertrauensfragen & ehrliche EinschÃ¤tzungen.">
        <input type="checkbox" value="daring" />
        ğŸ«± Vertrauensbasis
      </label>
      <label class="category-item" data-tooltip="TiefgrÃ¼ndige EinschÃ¤tzungen zu Charakter und PersÃ¶nlichkeit.">
        <input type="checkbox" value="personal" />
        ğŸ§  PersÃ¶nlich & TiefgrÃ¼ndig
      </label>
      <label class="category-item" data-tooltip="Mutige, freizÃ¼gige Aussagen â€“ nur wenn ihr euch kennt.">
        <input type="checkbox" value="bold" />
        ğŸ”¥ Wagemutig & FreizÃ¼gig
      </label>
      <label class="category-item" data-tooltip="Intime Aussagen Ã¼ber Liebe, GefÃ¼hle & private Themen.">
        <input type="checkbox" value="intimate" />
        ğŸ”’ Privat & Intim
      </label>
      <label class="category-item" data-tooltip="TabubrÃ¼che, Extreme, WTF-Momente.">
        <input type="checkbox" value="extreme" />
        âš¡ Extrem & Provokant
      </label>
    </div>

    <button class="start-btn" id="wdeStartBtn" type="button">Los gehtâ€™s!</button>
  </div>
</div>

<!-- Ich hab noch nie Modal -->
<div class="modal-overlay hidden" id="ihnnModal" role="dialog" aria-modal="true" aria-labelledby="ihnnModalTitle" tabindex="-1">
  <div class="modal">
    <button class="close-modal" id="closeIhnnModal" aria-label="SchlieÃŸen">âŒ</button>
    <h2 id="ihnnModalTitle">Ich hab noch nie... â€“ Kategorien</h2>

    <div class="mode-select" role="group" aria-label="Modus auswÃ¤hlen">
      <button id="ihnnBtnMixed" class="mode-btn active" type="button">ğŸ¨ Gemischt</button>
      <button id="ihnnBtnCustom" class="mode-btn" type="button">ğŸ›ï¸ Kategorien wÃ¤hlen</button>
    </div>

    <div class="category-select hidden" id="ihnnCategoryOptions">
      <label class="category-item" data-tooltip="Harmlose, lustige Aussagen â€“ zum Lockerwerden.">
        <input type="checkbox" value="funny" />
        ğŸ˜‚ Locker und Lustig
      </label>
      <label class="category-item" data-tooltip="Aussagen aus Alltag und Leben â€“ relatable!">
        <input type="checkbox" value="casual" />
        ğŸ˜ Alltag & Erlebnisse
      </label>
      <label class="category-item" data-tooltip="Vertrauensvolle, tiefere Aussagen.">
        <input type="checkbox" value="daring" />
        ğŸ«± Vertrauensbasis
      </label>
      <label class="category-item" data-tooltip="Eher gewagt und offen â€“ nur fÃ¼r mutige Spieler.">
        <input type="checkbox" value="personal" />
        ğŸ”¥ PersÃ¶nlich & FreizÃ¼gig
      </label>
      <label class="category-item" data-tooltip="Liebe, Dates, GefÃ¼hle â€“ es wird romantisch.">
        <input type="checkbox" value="flirty" />
        ğŸ’‹ Flirty & Romantisch
      </label>
      <label class="category-item" data-tooltip="Schockierend, wild, manchmal peinlich.">
        <input type="checkbox" value="extreme" />
        âš¡ Extrem & Provokant
      </label>
    </div>

    <button class="start-btn" id="ihnnStartBtn" type="button">Los gehtâ€™s!</button>
  </div>
</div>

<!-- Entweder/Oder Modal -->
<div class="modal-overlay hidden" id="ewodModal" role="dialog" aria-modal="true" aria-labelledby="ewodModalTitle" tabindex="-1">
  <div class="modal">
    <button class="close-modal" id="closeEwodModal" aria-label="SchlieÃŸen">âŒ</button>
    <h2 id="ewodModalTitle">Entweder/oder â€“ Kategorien</h2>

    <div class="mode-select" role="group" aria-label="Modus auswÃ¤hlen">
      <button id="ewodBtnMixed" class="mode-btn active" type="button">ğŸ¨ Gemischt</button>
      <button id="ewodBtnCustom" class="mode-btn" type="button">ğŸ›ï¸ Kategorien wÃ¤hlen</button>
    </div>

    <div class="category-select hidden" id="ewodCategoryOptions">
      <label class="category-item" data-tooltip="SpaÃŸfragen und absurde Entscheidungen.">
        <input type="checkbox" value="funny" />
        ğŸ˜‚ SpaÃŸ & Albern
      </label>
      <label class="category-item" data-tooltip="Was wÃ¼rdest du im Alltag wirklich tun?">
        <input type="checkbox" value="life" />
        ğŸŒ Alltag & Leben
      </label>
      <label class="category-item" data-tooltip="Herz oder Kopf? Liebe oder Freiheit?">
        <input type="checkbox" value="flirty" />
        ğŸ’Œ Romantik & Flirt
      </label>
      <label class="category-item" data-tooltip="Spannende Extreme â€“ oft unangenehm, immer lustig.">
        <input type="checkbox" value="extreme" />
        âš¡ Extrem & Provokant
      </label>
    </div>

    <button class="start-btn" id="ewodStartBtn" type="button">Los gehtâ€™s!</button>
  </div>
</div>

<!-- Voting Modal -->
<div class="modal-overlay hidden" id="ldtModal" role="dialog" aria-modal="true" aria-labelledby="ldtModalTitle" tabindex="-1">
  <div class="modal">
    <button class="close-modal" id="closeLdtModal" aria-label="SchlieÃŸen">âŒ</button>
    <h2 id="ldtModalTitle">Voting â€“ Kategorien</h2>

    <div class="mode-select" role="group" aria-label="Modus auswÃ¤hlen">
      <button id="ldtBtnMixed" class="mode-btn active" type="button">ğŸ¨ Gemischt</button>
      <button id="ldtBtnCustom" class="mode-btn" type="button">ğŸ›ï¸ Kategorien wÃ¤hlen</button>
    </div>

    <div class="category-select hidden" id="ldtCategoryOptions">
      <label class="category-item" data-tooltip="Lustige und absurde Aussagen zum Schmunzeln.">
        <input type="checkbox" value="funny" />
        ğŸ˜‚ SpaÃŸ & Albern
      </label>
      <label class="category-item" data-tooltip="Geheime Wahrheiten kommen ans Licht.">
        <input type="checkbox" value="secrets" />
        ğŸ¤ Heimliche Wahrheiten
      </label>
      <label class="category-item" data-tooltip="Freunde, GefÃ¼hle und Beziehungen einschÃ¤tzen.">
        <input type="checkbox" value="personal" />
        ğŸ’˜ Freundschaft & Romantik
      </label>
      <label class="category-item" data-tooltip="Wie siehst du dich selbst â€“ und wie sehen dich andere?">
        <input type="checkbox" value="identity" />
        ğŸ­ Wer bist du wirklich?
      </label>
      <label class="category-item" data-tooltip="Kontroverse Aussagen â€“ Diskussionspotenzial!">
        <input type="checkbox" value="opinion" />
        ğŸ’¡ Meinungssache
      </label>
    </div>

    <button class="start-btn" id="ldtStartBtn" type="button">Los gehtâ€™s!</button>
  </div>
</div>

<!-- Modal: Spieler:innen-Auswahl -->
<div class="modal-overlay hidden" id="playerModal">
  <div class="modal">
    <button class="close-modal" id="closePlayerModal">âŒ</button>
    <h2>Wer spielt mit?</h2>

    <div id="playerList">
      <div class="player-row">
        <input type="text" placeholder="Name eingeben" class="player-name" />
        <div class="gender-toggle" data-gender="mixed">
          <button class="gender-option active" data-value="mixed">âš§</button>
          <button class="gender-option" data-value="male">ğŸ‘¦</button>
          <button class="gender-option" data-value="female">ğŸ‘§</button>
        </div>
      </div>
    </div>

    <button class="start-btn" id="startGameBtn">Spiel starten</button>
  </div>
</div>

<!-- ========== SCRIPTS ========== -->
<script src="JavaScript/modi-auswahl_dropdown.js" defer></script>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const modeSelection = document.getElementById("modeSelection");
  const questionView = document.getElementById("questionView");
  const categoryLabel = document.getElementById("categoryLabel");
  const penaltyHeading = document.getElementById("penaltyHeading");
  const questionBox = document.getElementById("questionBox");
  const doneBtn = document.getElementById("doneBtn");
  const truthBtn = document.getElementById("truthBtn");
  const dareBtn = document.getElementById("dareBtn");
  const penaltyBtn = document.getElementById("penaltyBtn");
  const categoryModal = document.getElementById("categoryModal");
  const playerModal = document.getElementById("playerModal");
  const playerNameElement = document.getElementById("playerName");
  const categoryLabelBox = document.getElementById("categoryLabelBox");
  const questionContainer = document.getElementById("questionContainer");

  let categories = [];
  let allData = {};
  let selectedPlayers = JSON.parse(localStorage.getItem("spielerListe")) || [];
  let selectedGender = localStorage.getItem("ausgewaehltesGeschlecht") || "alle";
  let usedQuestions = { wahrheit: [], pflicht: [], strafe: [] };

  const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

  async function loadJSON() {
    const response = await fetch("wop.json");
    allData = await response.json();
  }

  function getSelectedCategories() {
    return Object.keys(allData).filter(k => localStorage.getItem("kat_" + k) === "true");
  }

  function chooseRandomPlayer() {
    if (!selectedPlayers.length) return "";
    return selectedPlayers[Math.floor(Math.random() * selectedPlayers.length)];
  }

  function chooseRandomQuestion(type) {
    const cat = categories[Math.floor(Math.random() * categories.length)];
    const data = allData[cat][type];
    const validData = data.filter(q => {
      const text = type === "wahrheit" ? q.frage : q.text || q.gruppentext;
      return !usedQuestions[type].includes(text) &&
        (!q.geschlecht || q.geschlecht === selectedGender || selectedGender === "alle");
    });

    if (!validData.length) {
      usedQuestions[type] = [];
      return chooseRandomQuestion(type); // retry
    }

    const q = validData[Math.floor(Math.random() * validData.length)];
    const text = type === "wahrheit" ? q.frage : q.text || q.gruppentext;
    usedQuestions[type].push(text);

    return { text, label: allData[cat].label, isGroup: !!q.gruppentext };
  }

  function animateQuestionBox(question, label, isPenalty = false, isGroup = false) {
    categoryLabel.textContent = label;
    questionBox.textContent = question;

    if (isPenalty) {
      penaltyHeading.style.display = "block";
      categoryLabelBox.classList.add("mystic");
    } else {
      penaltyHeading.style.display = "none";
      categoryLabelBox.classList.remove("mystic");
    }

    if (isGroup) {
      playerNameElement.textContent = "GRUPPE";
    }

    questionView.classList.remove("hidden");
    modeSelection.classList.add("slide-left-out");
    await sleep(300);
    modeSelection.classList.add("hidden");
    questionView.classList.remove("slide-right-in");
  }

  function resetToStartView() {
    questionView.classList.add("slide-left-out");
    setTimeout(() => {
      questionView.classList.add("hidden");
      modeSelection.classList.remove("hidden");
      modeSelection.classList.remove("slide-left-out");
      modeSelection.classList.add("slide-right-in");
    }, 300);
  }

  async function showRandomPlayer() {
    playerNameElement.textContent = "";
    modeSelection.classList.add("hidden");
    document.getElementById("werIstDran").classList.remove("hidden");

    await sleep(500); // kleine Pause vor dem Rattern

    const duration = 1200;
    const start = Date.now();
    const interval = 75;

    return new Promise((resolve) => {
      const intervalId = setInterval(() => {
        const random = chooseRandomPlayer();
        if (!random) return;
        playerNameElement.textContent = random;

        if (Date.now() - start > duration) {
          clearInterval(intervalId);
          document.getElementById("werIstDran").classList.add("hidden");
          modeSelection.classList.remove("hidden");
          resolve();
        }
      }, interval);
    });
  }

  truthBtn.addEventListener("click", async () => {
    const { text, label } = chooseRandomQuestion("wahrheit");
    await animateQuestionBox(text, label);
  });

  dareBtn.addEventListener("click", async () => {
    const { text, label, isGroup } = chooseRandomQuestion("pflicht");
    await animateQuestionBox(text, label, false, isGroup);
  });

  penaltyBtn.addEventListener("click", async () => {
    const { text, label } = chooseRandomQuestion("strafe");
    await animateQuestionBox(text, label, true);
  });

  doneBtn.addEventListener("click", resetToStartView);

  await loadJSON();
  categories = getSelectedCategories();
  await showRandomPlayer();

  // === SCROLL-LOCK ===
  function toggleScrollLock(isLocked) {
    document.body.classList.toggle("scroll-lock", isLocked);
  }

  const observer = new MutationObserver(() => {
    const isAnyModalVisible =
      !categoryModal.classList.contains("hidden") ||
      !playerModal.classList.contains("hidden");
    toggleScrollLock(isAnyModalVisible);
  });

  observer.observe(categoryModal, { attributes: true, attributeFilter: ["class"] });
  observer.observe(playerModal, { attributes: true, attributeFilter: ["class"] });
});
</script>
  

</body>
</html>
