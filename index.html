<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wahr oder Klar? – Die Spielewebseite für Freunde und Spaß</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="bilder/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="bilder/favicon.svg" />
  <link rel="shortcut icon" href="bilder/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="bilder/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Friendzone Fun" />
  <link rel="manifest" href="bilder/site.webmanifest" />
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo">🎲</div>
    <div class="title-group">
      <h1>Wahr oder Klar? – Die Spielewebseite für Freunde & Spaß</h1>
      <p class="subtitle">Wählt einen Spielmodus und habt Spaß!</p>
    </div>
    <div class="icon-right">🎉</div>
  </div>
</header>

<main>
  <section class="intro">
    <h2>Hey! Schön, dass du da bist 👋</h2>
    <p>Hier kannst du mit deinen Freunden richtig coole Spiele spielen. <br /> Egal ob Klassenfahrt, Geburtstag oder einfach so – such dir einen Spielmodus aus und los geht’s!</p>
  </section>

  <section class="grid">
    <a class="card" href="#" id="wopCard">
      <div class="emoji">🎭</div>
      <h3>Wahrheit oder Pflicht</h3>
      <p>Harmlos oder mutig – du entscheidest!</p>
    </a>
    <a class="card" href="#" id="wdeCard">
      <div class="emoji">🤔</div>
      <h3>Wer würde eher...?</h3>
      <p>Lustige Einschätzungen unter Freunden.</p>
    </a>
    <a class="card" href="#" id="ihnnCard">
      <div class="emoji">🍻</div>
      <h3>Ich hab noch nie...</h3>
      <p>Geständnisse und Spaß garantiert.</p>
    </a>
    <a class="card" href="#" id="ewodCard">
      <div class="emoji">⚖️</div>
      <h3>Entweder/Oder</h3>
      <p>Pizza oder Pommes? Entscheide dich!</p>
    </a>
    <a class="card" href="#" id="ldtCard">
      <div class="emoji">📊</div>
      <h3>Voting</h3>
      <p>Wie denkt die Runde wirklich?</p>
    </a>
  </section>
</main>

<footer>
  © 2025 – Julian Kaiser <br />
  Made with 💙 – Spaß garantiert 😄
</footer>

<!-- Modal "Wahrheit oder Pflicht" – Schritt 1: Geschlecht + Kategorien -->
<div class="modal-overlay hidden" id="wopModal">
  <div class="modal">
    <span class="close-modal" id="closeWopModal">❌</span>
    <h2>Wahrheit oder Pflicht – Kategorien & Spieler</h2>

    <!-- Geschlechtsauswahl -->
    <div class="gender-select">
      <p>Für wen sollen die Aufgaben sein?</p>
      <div class="gender-buttons">
        <button class="gender-btn active" data-value="mixed">⚧ Gemischt</button>
        <button class="gender-btn" data-value="male">👦 Nur Jungs</button>
        <button class="gender-btn" data-value="female">👧 Nur Mädchen</button>
      </div>
    </div>

    <!-- Moduswahl -->
    <div class="mode-select">
      <button id="wopBtnMixed" class="mode-btn active">🎨 Gemischt</button>
      <button id="wopBtnCustom" class="mode-btn">🎛️ Kategorien wählen</button>
    </div>

    <!-- Kategorienauswahl -->
    <div class="category-select" id="wopCategoryOptions" style="display: none;">
      <label class="category-item" data-tooltip="Lustige, harmlose Aufgaben – ideal zum Lockerwerden.">
        <input type="checkbox" value="funny" /> 🧃 Locker & Lustig
        <div class="mobile-tooltip hidden">Lustige, harmlose Aufgaben – ideal zum Lockerwerden.</div>
      </label>
      <label class="category-item" data-tooltip="Ehrliche Fragen und Challenges für mehr Vertrauen.">
        <input type="checkbox" value="daring" /> 🫱 Vertrauensbasis
        <div class="mobile-tooltip hidden">Ehrliche Fragen und Challenges für mehr Vertrauen.</div>
      </label>
      <label class="category-item" data-tooltip="Fantasievolle oder gedanklich tiefere Fragen.">
        <input type="checkbox" value="mind" /> 🧠 Kopfkino
        <div class="mobile-tooltip hidden">Fantasievolle oder gedanklich tiefere Fragen.</div>
      </label>
      <label class="category-item" data-tooltip="Gefühle, Beziehungen, Vergangenheit – es wird ernst.">
        <input type="checkbox" value="deep" /> 💌 Deep Talk
        <div class="mobile-tooltip hidden">Gefühle, Beziehungen, Vergangenheit – es wird ernst.</div>
      </label>
      <label class="category-item" data-tooltip="Mutige Fragen oder Aufgaben mit Nervenkitzel.">
        <input type="checkbox" value="bold" /> 🫣 Mut & Grenzen
        <div class="mobile-tooltip hidden">Mutige Fragen oder Aufgaben mit Nervenkitzel.</div>
      </label>
      <label class="category-item" data-tooltip="Peinlich, provokant oder total verrückt – nur für Mutige.">
        <input type="checkbox" value="taboo" /> 🚫 Tabuzone
        <div class="mobile-tooltip hidden">Peinlich, provokant oder total verrückt – nur für Mutige.</div>
      </label>
    </div>

    <button class="start-btn" id="wopToPlayerBtn">Weiter zu Spielern</button>
  </div>
</div>

<!-- Modal "Wahrheit oder Pflicht" – Schritt 2: Spieler festlegen -->
<div class="modal-overlay hidden" id="wopPlayersModal">
  <div class="modal">
    <span class="close-modal" id="closeWopPlayersModal">❌</span>
    <h2>Spieler festlegen</h2>
    <p>Tragt hier die Namen eurer Mitspieler:innen ein.</p>

    <form id="playersForm" autocomplete="off" novalidate>
      <div id="playersList">
        <!-- Dynamisch generierte Spielerfelder -->
      </div>
      <button type="button" id="addPlayerBtn" class="start-btn" style="margin-bottom:1rem;">+ Spieler hinzufügen</button>
    </form>

    <button class="start-btn" id="wopStartGameBtn" disabled>Spiel starten</button>
  </div>
</div>

  <!-- Modal "Wer würde eher...?" -->
<div class="modal-overlay hidden" id="wdeModal">
  <div class="modal">
    <span class="close-modal" id="closeWdeModal">❌</span>
    <h2>Wer würde eher...? – Kategorien</h2>

    <div class="mode-select">
      <button id="wdeBtnMixed" class="mode-btn active">🎨 Gemischt</button>
      <button id="wdeBtnCustom" class="mode-btn">🎛️ Kategorien wählen</button>
    </div>

    <div class="category-select" id="wdeCategoryOptions" style="display: none;">
      <label class="category-item" data-tooltip="Lustige, lockere Aussagen – einfach zum Lachen.">
        <input type="checkbox" value="funny"> 😂 Locker und Lustig
        <div class="mobile-tooltip hidden">Lustige, lockere Aussagen – einfach zum Lachen.</div>
      </label>
      <label class="category-item" data-tooltip="Wer kennt wen wirklich? Vertrauensfragen & ehrliche Einschätzungen.">
        <input type="checkbox" value="daring"> 🫱 Vertrauensbasis
        <div class="mobile-tooltip hidden">Wer kennt wen wirklich? Vertrauensfragen & ehrliche Einschätzungen.</div>
      </label>
      <label class="category-item" data-tooltip="Tiefgründige Einschätzungen zu Charakter und Persönlichkeit.">
        <input type="checkbox" value="personal"> 🧠 Persönlich & Tiefgründig
        <div class="mobile-tooltip hidden">Tiefgründige Einschätzungen zu Charakter und Persönlichkeit.</div>
      </label>
      <label class="category-item" data-tooltip="Mutige, freizügige Aussagen – nur wenn ihr euch kennt.">
        <input type="checkbox" value="bold"> 🔥 Wagemutig & Freizügig
        <div class="mobile-tooltip hidden">Mutige, freizügige Aussagen – nur wenn ihr euch kennt.</div>
      </label>
      <label class="category-item" data-tooltip="Intime Aussagen über Liebe, Gefühle & private Themen.">
        <input type="checkbox" value="intimate"> 🔒 Privat & Intim
        <div class="mobile-tooltip hidden">Intime Aussagen über Liebe, Gefühle & private Themen.</div>
      </label>
      <label class="category-item" data-tooltip="Tabubrüche, Extreme, WTF-Momente.">
        <input type="checkbox" value="extreme"> ⚡ Extrem & Provokant
        <div class="mobile-tooltip hidden">Tabubrüche, Extreme, WTF-Momente.</div>
      </label>
    </div>

    <button class="start-btn" id="wdeStartBtn">Los geht’s!</button>
  </div>
</div>


<!-- Modal "Ich hab noch nie..." -->
<div class="modal-overlay hidden" id="ihnnModal">
  <div class="modal">
    <span class="close-modal" id="closeIhnnModal">❌</span>
    <h2>Ich hab noch nie... – Kategorien</h2>

    <div class="mode-select">
      <button id="ihnnBtnMixed" class="mode-btn active">🎨 Gemischt</button>
      <button id="ihnnBtnCustom" class="mode-btn">🎛️ Kategorien wählen</button>
    </div>
    <div class="category-select" id="ihnnCategoryOptions" style="display: none;">
      <label class="category-item" data-tooltip="Harmlose, lustige Aussagen – zum Lockerwerden.">
        <input type="checkbox" value="funny"> 😂 Locker und Lustig
        <div class="mobile-tooltip hidden">Harmlose, lustige Aussagen – zum Lockerwerden.</div>
      </label>
      <label class="category-item" data-tooltip="Aussagen aus Alltag und Leben – relatable!">
        <input type="checkbox" value="casual"> 😎 Alltag & Erlebnisse
        <div class="mobile-tooltip hidden">Aussagen aus Alltag und Leben – relatable!</div>
      </label>
      <label class="category-item" data-tooltip="Vertrauensvolle, tiefere Aussagen.">
        <input type="checkbox" value="daring"> 🫱 Vertrauensbasis
        <div class="mobile-tooltip hidden">Vertrauensvolle, tiefere Aussagen.</div>
      </label>
      <label class="category-item" data-tooltip="Eher gewagt und offen – nur für mutige Spieler.">
        <input type="checkbox" value="personal"> 🔥 Persönlich & Freizügig
        <div class="mobile-tooltip hidden">Eher gewagt und offen – nur für mutige Spieler.</div>
      </label>
      <label class="category-item" data-tooltip="Liebe, Dates, Gefühle – es wird romantisch.">
        <input type="checkbox" value="flirty"> 💋 Flirty & Romantisch
        <div class="mobile-tooltip hidden">Liebe, Dates, Gefühle – es wird romantisch.</div>
      </label>
      <label class="category-item" data-tooltip="Schockierend, wild, manchmal peinlich.">
        <input type="checkbox" value="extreme"> ⚡ Extrem & Provokant
        <div class="mobile-tooltip hidden">Schockierend, wild, manchmal peinlich.</div>
      </label>
    </div>

    <button class="start-btn" id="ihnnStartBtn">Los geht’s!</button>
  </div>
</div>


<!-- Modal "Entweder / oder" -->
<div class="modal-overlay hidden" id="ewodModal">
  <div class="modal">
    <span class="close-modal" id="closeEwodModal">❌</span>
    <h2>Entweder/oder – Kategorien</h2>

    <div class="mode-select">
      <button id="ewodBtnMixed" class="mode-btn active">🎨 Gemischt</button>
      <button id="ewodBtnCustom" class="mode-btn">🎛️ Kategorien wählen</button>
    </div>
    <div class="category-select" id="ewodCategoryOptions" style="display: none;">
      <label class="category-item" data-tooltip="Spaßfragen und absurde Entscheidungen.">
        <input type="checkbox" value="funny"> 😂 Spaß & Albern
        <div class="mobile-tooltip hidden">Spaßfragen und absurde Entscheidungen.</div>
      </label>
      <label class="category-item" data-tooltip="Was würdest du im Alltag wirklich tun?">
        <input type="checkbox" value="life"> 🌍 Alltag & Leben
        <div class="mobile-tooltip hidden">Was würdest du im Alltag wirklich tun?</div>
      </label>
      <label class="category-item" data-tooltip="Herz oder Kopf? Liebe oder Freiheit?">
        <input type="checkbox" value="flirty"> 💌 Romantik & Flirt
        <div class="mobile-tooltip hidden">Herz oder Kopf? Liebe oder Freiheit?</div>
      </label>
      <label class="category-item" data-tooltip="Spannende Extreme – oft unangenehm, immer lustig.">
        <input type="checkbox" value="extreme"> ⚡ Extrem & Provokant
        <div class="mobile-tooltip hidden">Spannende Extreme – oft unangenehm, immer lustig.</div>
      </label>
    </div>

    <button class="start-btn" id="ewodStartBtn">Los geht’s!</button>
  </div>
</div>


<!-- Modal "Voting" -->
<div class="modal-overlay hidden" id="ldtModal">
  <div class="modal">
    <span class="close-modal" id="closeLdtModal">❌</span>
    <h2>Voting – Kategorien</h2>

    <div class="mode-select">
      <button id="ldtBtnMixed" class="mode-btn active">🎨 Gemischt</button>
      <button id="ldtBtnCustom" class="mode-btn">🎛️ Kategorien wählen</button>
    </div>

    <div class="category-select" id="ldtCategoryOptions" style="display: none;">
      <label class="category-item" data-tooltip="Lustige und absurde Aussagen zum Schmunzeln.">
        <input type="checkbox" value="funny"> 😂 Spaß & Albern
        <div class="mobile-tooltip hidden">Lustige und absurde Aussagen zum Schmunzeln.</div>
      </label>
      <label class="category-item" data-tooltip="Geheime Wahrheiten kommen ans Licht.">
        <input type="checkbox" value="secrets"> 🤐 Heimliche Wahrheiten
        <div class="mobile-tooltip hidden">Geheime Wahrheiten kommen ans Licht.</div>
      </label>
      <label class="category-item" data-tooltip="Freunde, Gefühle und Beziehungen einschätzen.">
        <input type="checkbox" value="personal"> 💘 Freundschaft & Romantik
        <div class="mobile-tooltip hidden">Freunde, Gefühle und Beziehungen einschätzen.</div>
      </label>
      <label class="category-item" data-tooltip="Wie siehst du dich selbst – und wie sehen dich andere?">
        <input type="checkbox" value="identity"> 🎭 Wer bist du wirklich?
        <div class="mobile-tooltip hidden">Wie siehst du dich selbst – und wie sehen dich andere?</div>
      </label>
      <label class="category-item" data-tooltip="Kontroverse Aussagen – Diskussionspotenzial!">
        <input type="checkbox" value="opinion"> 💡 Meinungssache
        <div class="mobile-tooltip hidden">Kontroverse Aussagen – Diskussionspotenzial!</div>
      </label>
    </div>

    <button class="start-btn" id="ldtStartBtn">Los geht’s!</button>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // --- Variablen für Modals und Buttons ---
    const wopModal = document.getElementById("wopModal");
    const wopPlayersModal = document.getElementById("wopPlayersModal");
    const wopCard = document.getElementById("wopCard");
    const closeWopModal = document.getElementById("closeWopModal");
    const closeWopPlayersModal = document.getElementById("closeWopPlayersModal");
    const wopToPlayerBtn = document.getElementById("wopToPlayerBtn");
    const wopStartGameBtn = document.getElementById("wopStartGameBtn");
    const playersList = document.getElementById("playersList");
    const addPlayerBtn = document.getElementById("addPlayerBtn");

    // Geschlechtsauswahl Buttons & Kategorien
    const genderButtons = wopModal.querySelectorAll(".gender-btn");
    const modeBtnMixed = document.getElementById("wopBtnMixed");
    const modeBtnCustom = document.getElementById("wopBtnCustom");
    const categoryOptions = document.getElementById("wopCategoryOptions");

    // Aktive Werte speichern
    let selectedGender = "mixed";
    let selectedMode = "mixed";
    let selectedCategories = ["funny", "daring", "mind", "deep", "bold", "taboo"];

    // Spieler-Daten
    let players = [];

    // --- Funktionen ---

    // Modal öffnen (allgemein)
    function openModal(modal) {
      modal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    }
    // Modal schließen (allgemein)
    function closeModal(modal) {
      modal.classList.add("hidden");
      document.body.style.overflow = "";
    }

    // Start: Modal "Wahrheit oder Pflicht" öffnen bei Klick auf Card
    wopCard.addEventListener("click", (e) => {
      e.preventDefault();
      openModal(wopModal);
      resetWopModal();
    });

    closeWopModal.addEventListener("click", () => {
      closeModal(wopModal);
    });

    closeWopPlayersModal.addEventListener("click", () => {
      closeModal(wopPlayersModal);
    });

    // Geschlechtsauswahl klicken
    genderButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        genderButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        selectedGender = btn.dataset.value;

        // Wenn Nur Jungs oder Nur Mädchen, schalte Kategorien aus, sonst an
        if (selectedGender === "male" || selectedGender === "female") {
          // Optional: hier evtl Kategorien anpassen / einschränken, falls gewünscht
        }
      });
    });

    // Modus Auswahl
    modeBtnMixed.addEventListener("click", () => {
      selectedMode = "mixed";
      modeBtnMixed.classList.add("active");
      modeBtnCustom.classList.remove("active");
      categoryOptions.style.display = "none";
      selectedCategories = ["funny", "daring", "mind", "deep", "bold", "taboo"];
    });

    modeBtnCustom.addEventListener("click", () => {
      selectedMode = "custom";
      modeBtnCustom.classList.add("active");
      modeBtnMixed.classList.remove("active");
      categoryOptions.style.display = "flex";
      // Falls keine Kategorien gewählt: leere Liste
      selectedCategories = [];
    });

    // Kategorien Checkboxen auswählen
    categoryOptions.querySelectorAll("input[type='checkbox']").forEach(cb => {
      cb.addEventListener("change", () => {
        selectedCategories = Array.from(categoryOptions.querySelectorAll("input[type='checkbox']:checked")).map(c => c.value);
      });
    });

    // Weiter zu Spielern Button
    wopToPlayerBtn.addEventListener("click", () => {
      if (selectedMode === "custom" && selectedCategories.length === 0) {
        alert("Bitte wähle mindestens eine Kategorie aus!");
        return;
      }
      // Kategorien und Geschlecht im localStorage speichern
      localStorage.setItem("wop_gender", selectedGender);
      localStorage.setItem("wop_mode", selectedMode);
      localStorage.setItem("wop_categories", JSON.stringify(selectedCategories));

      closeModal(wopModal);
      openModal(wopPlayersModal);
      resetPlayersForm();
      addInitialPlayers(3); // Start mit 3 Feldern
    });

    // Spielerformular: Spieler hinzufügen
    function addPlayer(name = "", gender = selectedGender) {
      const index = playersList.children.length;
      const wrapper = document.createElement("div");
      wrapper.classList.add("player-entry");
      wrapper.style.display = "flex";
      wrapper.style.alignItems = "center";
      wrapper.style.justifyContent = "space-between";
      wrapper.style.marginBottom = "0.7rem";
      wrapper.dataset.index = index;

      // Eingabefeld Name
      const inputName = document.createElement("input");
      inputName.type = "text";
      inputName.placeholder = `Spieler ${index + 1} Name`;
      inputName.value = name;
      inputName.style.flexGrow = "1";
      inputName.style.marginRight = "0.5rem";
      inputName.autocomplete = "off";
      inputName.required = true;
      inputName.dataset.index = index;

      // Geschlechtsregler (klein)
      const genderSwitch = document.createElement("button");
      genderSwitch.type = "button";
      genderSwitch.classList.add("gender-btn");
      genderSwitch.style.padding = "0.3rem
